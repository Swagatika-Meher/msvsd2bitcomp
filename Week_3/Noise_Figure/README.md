Noise figure (NF) usually refers how much the noise added by the transistor affects the quality of the signal. A lower noise figure is better because it means that the transistor adds less noise to the signal.

# Post-layout of Ring Oscillator using ALIGN
## When NF=2
Input netlist for ALIGN tool when **NF=2**,
```
.subckt RingOscillator Vdd out Gnd

XM1 net1 out Vdd Vdd sky130_fd_pr__pfet_01v8 L=150n W=1050n nf=2
XM2 net2 net1 Vdd Vdd sky130_fd_pr__pfet_01v8 L=150n W=1050n nf=2
XM3 out net2 Vdd Vdd sky130_fd_pr__pfet_01v8 L=150n W=1050n nf=2
XM4 net1 out Gnd Gnd sky130_fd_pr__nfet_01v8 L=150n W=1050n nf=2
XM5 net2 net1 Gnd Gnd sky130_fd_pr__nfet_01v8 L=150n W=1050n nf=2
XM6 out net2 Gnd Gnd sky130_fd_pr__nfet_01v8 L=150n W=1050n nf=2
.ends RingOscillator
```
After successfully created `.gds` and `.lef` files, open magic tool and `go to file --> read GDS --> open the .gds file` and view the layout in magic tool.

![z13](https://user-images.githubusercontent.com/114692581/222750862-55ad5ca4-d212-462f-882d-ee66ebad1d2d.PNG)

Now, click `i` and go to `Tkcon.tcl` command window. Type the following command to extract the netlist.
```
extract do local
extract all
ext2spice cthresh 0 rthresh 0
ext2spice
```
After exporting '.gds' file generated by Align to magic and extract '.spice' file, manually the `.control` statements are added and the postlayout (generated by ALIGN tool) compared with pre-layout testbench inverter schematic.
```
* SPICE3 file created from RINGOSC_0.ext - technology: sky130A

.subckt RINGOSC_0 VDD out GND
X0 STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# m1_688_4424# m1_398_2912# m1_398_2912# sky130_fd_pr__pfet_01v8 ad=2.94e+11p pd=2.66e+06u as=1.6695e+12p ps=1.578e+07u w=1.05e+06u l=150000u
X1 m1_398_2912# m1_688_4424# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# m1_398_2912# sky130_fd_pr__pfet_01v8 ad=0p pd=0u as=0p ps=0u w=1.05e+06u l=150000u
X2 li_405_1579# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# m1_398_2912# m1_398_2912# sky130_fd_pr__pfet_01v8 ad=2.94e+11p pd=2.66e+06u as=0p ps=0u w=1.05e+06u l=150000u
X3 m1_398_2912# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# li_405_1579# m1_398_2912# sky130_fd_pr__pfet_01v8 ad=0p pd=0u as=0p ps=0u w=1.05e+06u l=150000u
X4 li_405_1579# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# VSUBS VSUBS sky130_fd_pr__nfet_01v8 ad=2.94e+11p pd=2.66e+06u as=1.6695e+12p ps=1.578e+07u w=1.05e+06u l=150000u
X5 VSUBS STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# li_405_1579# VSUBS sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=1.05e+06u l=150000u
X6 STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# m1_688_4424# VSUBS VSUBS sky130_fd_pr__nfet_01v8 ad=2.94e+11p pd=2.66e+06u as=0p ps=0u w=1.05e+06u l=150000u
X7 VSUBS m1_688_4424# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# VSUBS sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=1.05e+06u l=150000u
X8 m1_688_4424# li_405_1579# VSUBS VSUBS sky130_fd_pr__nfet_01v8 ad=2.94e+11p pd=2.66e+06u as=0p ps=0u w=1.05e+06u l=150000u
X9 VSUBS li_405_1579# m1_688_4424# VSUBS sky130_fd_pr__nfet_01v8 ad=0p pd=0u as=0p ps=0u w=1.05e+06u l=150000u
X10 m1_688_4424# li_405_1579# m1_398_2912# m1_398_2912# sky130_fd_pr__pfet_01v8 ad=2.94e+11p pd=2.66e+06u as=0p ps=0u w=1.05e+06u l=150000u
X11 m1_398_2912# li_405_1579# m1_688_4424# m1_398_2912# sky130_fd_pr__pfet_01v8 ad=0p pd=0u as=0p ps=0u w=1.05e+06u l=150000u
C0 li_405_1579# GND 0.14fF
C1 GND OUT 0.02fF
C2 li_405_1579# OUT 0.01fF
C3 m1_398_2912# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# 3.01fF
C4 m1_398_2912# m1_688_4424# 2.17fF
C5 STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# m1_688_4424# 0.59fF
C6 STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# VDD 0.03fF
C7 VDD m1_688_4424# 0.32fF
C8 GND STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# 0.15fF
C9 li_405_1579# m1_398_2912# 2.02fF
C10 li_405_1579# STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# 0.57fF
C11 li_405_1579# m1_688_4424# 0.44fF
C12 OUT STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# 0.00fF
C13 GND VDD 0.24fF
C14 li_405_1579# VDD 1.31fF
C15 OUT VDD 0.24fF
C16 VDD VSUBS 0.16fF
C17 li_405_1579# VSUBS 1.73fF 
**FLOATING
C18 STAGE2_INV_60376295_0_0_1677854142_0/li_491_571# VSUBS 0.49fF 
**FLOATING
C19 m1_398_2912# VSUBS 8.15fF 
**FLOATING
C20 m1_688_4424# VSUBS 2.47fF 
**FLOATING
.ends


*========Manually added========

x1 VDD out GND RINGOSC_0
V1 VDD GND 1.8
.save i(v1)
**** begin user architecture code

.lib /home/swagatika/open_pdks/sky130/sky130A/libs.tech/ngspice/sky130.lib.spice tt

.save all
.tran 1p 5n
.control
run
plot out
.save all
.endc
.GLOBAL VDD
.GLOBAL GND
.end
```
**NgSpice Plot**

![Z14](https://user-images.githubusercontent.com/114692581/222753645-9ee8d4d0-6ed7-4991-96b9-3b84458fae30.PNG)

## When NF=4
Similarly, the input netlist for ALIGN tool when **NF=4**,
```
.subckt RingOscillator Vdd out Gnd

XM1 net1 out Vdd Vdd sky130_fd_pr__pfet_01v8 L=150n W=1050n nf=2
XM2 net2 net1 Vdd Vdd sky130_fd_pr__pfet_01v8 L=150n W=1050n nf=2
XM3 out net2 Vdd Vdd sky130_fd_pr__pfet_01v8 L=150n W=1050n nf=2
XM4 net1 out Gnd Gnd sky130_fd_pr__nfet_01v8 L=150n W=1050n nf=2
XM5 net2 net1 Gnd Gnd sky130_fd_pr__nfet_01v8 L=150n W=1050n nf=2
XM6 out net2 Gnd Gnd sky130_fd_pr__nfet_01v8 L=150n W=1050n nf=2
.ends RingOscillator
```
* **ALIGN generated post-layout in Magic tool





